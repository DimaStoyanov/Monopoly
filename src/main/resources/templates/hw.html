<html>
<head>
    <title>Spring Boot WebSocket Chat Application</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
</head>
<body>
<button id="connect" onclick="connect()"> Connect</button>
<button onclick="send()"> Send</button>
<script>
    var stompClient = null;


    function connect() {
        var socket = new SockJS('/lobby');
        stompClient = Stomp.over(socket);


        stompClient.connect({}, function (frame) {
            stompClient.subscribe('/topic/hello', onMessageReceived);
            stompClient.send('/app/hello', {}, JSON.stringify({
                name: "Anonymous",
                details: "GG wp"
            }));
        });
    }

    function send() {
        stompClient.send('/app/get', {}, JSON.stringify({
            name: "ADMIN",
            details: "sudo"
        }));
    }


    function onError(e) {

    }

    function onMessageReceived(payload) {
        alert(payload);
        var parse = JSON.parse(payload.body);
        alert(parse.name);
        alert(parse.details);
        alert(payload.headers);
        alert(payload.headers.destination)
    }

</script>
</body>

</html>